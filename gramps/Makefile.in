include Makefile.comm

ifeq (${DB2HTML},)
DOCS = 
else
DOCS = doc/${GM}/C doc/${EG}/C
endif

# Append ${DOCS} to the next line to generate documentation
DIRS = src src/plugins src/docgen src/filters src/data ${DOCS}

all:
	@ for dir in ${DIRS}; do \
	  echo "Making all in $$dir"; \
	  (cd $$dir; ${MAKE} all); \
	done

install:
	@ for dir in ${DIRS}; do \
	  echo "Making install in $$dir"; \
	  (cd $$dir; ${MAKE} install); \
	done
	-${INSTALL} -d ${bindir}
	${INSTALL} gramps.sh ${bindir}/gramps
	${INSTALL} doc/gramps.dtd ${sharedir}
	chmod +x ${bindir}/gramps

uninstall:
	@ for dir in ${DIRS}; do \
	  echo "Making uninstall in $$dir"; \
	  (cd $$dir; ${MAKE} uninstall); \
	done
	rm ${bindir}/gramps

clean:
	@ for dir in ${DIRS}; do \
	  echo "Making clean in $$dir"; \
	  (cd $$dir; ${MAKE} clean); \
	done
	rm -f core *~ config.cache config.log config.status
