include Makefile.comm

SRCS = src src/plugins src/docgen src/filters src/data 
DOCS = doc/${GM}/C doc/${EG}/C

DIRS = ${SRCS} ${DOCS}

all:
	@ for dir in ${SRCS}; do \
	  echo "Making all in $$dir"; \
	  (cd $$dir; ${MAKE} all); \
	done

html:
	@ for dir in ${DOCS}; do \
	  echo "Making all in $$dir"; \
	  (cd $$dir; ${MAKE} html); \
	done

install:
	@ for dir in ${DIRS}; do \
	  echo "Making install in $$dir"; \
	  (cd $$dir; ${MAKE} install); \
	done
	-${INSTALL} -d ${bindir}
	${INSTALL} -m 755 gramps.sh ${bindir}/gramps
	${INSTALL} -m 644 doc/gramps.dtd ${sharedir}

install-html:
	@ for dir in ${DOCS}; do \
	  echo "Making install-html in $$dir"; \
	  (cd $$dir; ${MAKE} install-html); \
	done

uninstall:
	@ for dir in ${DIRS}; do \
	  echo "Making uninstall in $$dir"; \
	  (cd $$dir; ${MAKE} uninstall); \
	done
	rm ${bindir}/gramps

clean:
	@ for dir in ${DIRS}; do \
	  echo "Making clean in $$dir"; \
	  (cd $$dir; ${MAKE} clean); \
	done
	rm -f core *~ config.cache config.log config.status
