include @top_srcdir@/Makefile.comm

prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir 		= @bindir@
datadir		= @datadir@/@PACKAGE@
INSTALL		= @INSTALL@
docgen          = ${datadir}/docgen
srcdir		= @top_srcdir@
pycomp		= ${srcdir}/py-compile

# Use GNU make's ':=' syntax for nice wildcard use.
# If not using GNU make, then list all .py files individually
PYSRCS := ${wildcard *.py}

PYOBJS = ${PYSRCS:.py=.pyo}

all: ${PYOBJS}

install:
	${INSTALL} -d ${docgen}
	${INSTALL} *.py *.pyo ${docgen}

uninstall:
	rm ${docgen}/*.py ${docgen}/*.pyo 
	-rmdir ${docgen}

clean:
	-rm -f core *.pyo *.pyc *.bak *~	

# Add PYTHON suffix rules to make's vocabulary
.SUFFIXES: .py .pyo

# How do we properly compile a python module?
.py.pyo:
	chmod +x ${pycomp}
	${pycomp} $<
