include @top_srcdir@/Makefile.comm

prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir 		= @bindir@
datadir		= @datadir@/@PACKAGE@
INSTALL		= @INSTALL@
filters         = ${datadir}/filters
srcdir		= @top_srcdir@
pycomp		= ${srcdir}/py-compile

# Use GNU make's ':=' syntax for nice wildcard use.
# If not using GNU make, then list all .py files individually
PYSRCS := ${wildcard *.py}

PYOBJS = ${PYSRCS:.py=.pyo}

all: ${PYOBJS}

install:
	${INSTALL} -d ${filters}
	${INSTALL} -m 644 *.py *.pyo ${filters}

uninstall:
	rm ${filters}/*.py ${filters}/*.pyo
	-rmdir ${filters}

clean:
	-rm -f core *.pyo *.pyc *.bak *~	

# Add PYTHON suffix rules to make's vocabulary
.SUFFIXES: .py .pyo

# How do we properly compile a python module?
.py.pyo:
	${pycomp} $<
