prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir 		= @bindir@
datadir		= @datadir@/@PACKAGE@
INSTALL		= @INSTALL@
sharedir        = ${prefix}/share/gramps
GNOMEHELP       = ${prefix}/share/gnome/help
GM		= gramps-manual
EG		= extending-gramps

@SET_MAKE@

all:
	(cd src; ${MAKE} all)
	(cd src/plugins; ${MAKE} all)
	(cd src/filters; ${MAKE} all)
	(cd src/data; ${MAKE} all)

install:
	(cd src; ${MAKE} install)
	(cd src/plugins; ${MAKE} install)
	(cd src/filters; ${MAKE} install)
	(cd src/data; ${MAKE} install)
	-${INSTALL} -d ${bindir}
	-${INSTALL} -d ${GNOMEHELP}/${GM}/C
	-${INSTALL} -d ${GNOMEHELP}/${EG}/C
	-${INSTALL} doc/${GM}/C/${GM}/*.html ${GNOMEHELP}/${GM}/C
	-${INSTALL} doc/${GM}/C/${GM}/*.png ${GNOMEHELP}/${GM}/C
	-${INSTALL} doc/${EG}/C/${EG}/*.html ${GNOMEHELP}/${EG}/C
	${INSTALL} gramps.sh ${bindir}/gramps
	${INSTALL} doc/gramps.dtd ${sharedir}
	chmod +x ${bindir}/gramps

uninstall:
	(cd src; ${MAKE} uninstall)
	(cd src/plugins; ${MAKE} uninstall)
	(cd src/filters; ${MAKE} uninstall)
	(cd src/data; ${MAKE} uninstall)
	rm ${bindir}/gramps

clean:
	(cd src; ${MAKE} clean)
	(cd src/plugins; ${MAKE} clean)
	(cd src/filters; ${MAKE} clean)
	(cd src/data; ${MAKE} clean)
	rm -f core *~ config.cache config.log config.status
